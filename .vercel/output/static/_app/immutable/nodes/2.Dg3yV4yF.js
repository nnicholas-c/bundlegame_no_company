import{t as u,a as l,c as at,d as Qt}from"../chunks/ko2HRYsT.js";import{i as ht}from"../chunks/C-TMdnp2.js";import{p as yt,m as c,b as n,g as e,a6 as ie,a7 as $t,c as s,r as t,s as r,w as $,a as wt,f as Ne,a8 as ct,x as St,u as W,D as Zt}from"../chunks/DtNr4EEN.js";import{a as w,b as d,s as kt,d as nt,e as Ge}from"../chunks/D0K2T34E.js";import{i as I,e as he}from"../chunks/D_PDG52N.js";import{s as vt,o as De,e as Pt,g as Ae,r as gt,c as Nt,b as bt,l as et,d as jt,u as Bt,f as Jt,h as Lt,i as _t,j as Gt,k as qt,n as Kt,q as zt,m as st,p as ut,t as tt,v as Rt,w as Dt,x as es,F as At,y as ts,G as ss,z as rs,A as as,B as ns,C as os,D as is,E as ls,H as ds}from"../chunks/BnmQIfz2.js";import{e as _e,i as Ce,s as rt,a as Xt,b as cs,g as vs}from"../chunks/BGKys44x.js";import{g as Ue}from"../chunks/CetyYWOR.js";import{o as Ot,a as Et}from"../chunks/Bp5xqJ7A.js";import{p as Ct}from"../chunks/DMNK3ytd.js";var us=u('<p class="text-xs text-green-600"> </p>'),ps=u('<span class="rounded-full bg-emerald-50 px-2 py-0.5 font-medium text-emerald-700">Picking items</span>'),xs=u('<span class="rounded-full bg-blue-50 px-2 py-0.5 font-medium text-blue-700">Moving...</span>'),fs=u('<span class="rounded-full bg-slate-100 px-2 py-0.5 font-medium text-slate-700"> </span>'),ms=u("<li> </li>"),gs=u('<div class="flex-1 min-w-[180px] rounded-lg bg-slate-50 p-3 text-xs"><p class="font-semibold text-slate-900 mb-1"> </p> <p class="text-slate-600 mb-2"> </p> <ul class="space-y-0.5 text-slate-600"></ul></div>'),bs=u('<div class="text-center py-8"><button class="rounded-full bg-green-600 px-8 py-3 text-sm font-semibold text-white shadow-md hover:bg-green-700 transition" id="startpicking"> </button></div>'),_s=u('<span class="ml-1 rounded-full bg-slate-200 px-1.5 py-0.5 text-[9px]"> </span>'),hs=u("<button> <!></button>"),ys=u('<li class="flex justify-between"><span> </span> <span class="font-medium"> </span></li>'),$s=u('<li class="text-slate-400 italic text-[10px]">Empty</li>'),ws=u('<div><h5 class="text-xs font-medium text-slate-700 mb-1"> </h5> <ul class="text-xs text-slate-600 space-y-0.5 pl-2"><!> <!></ul></div>'),ks=u('<input class="rounded-lg border border-slate-200 px-2 py-1.5 text-xs placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500" type="number">'),Os=u('<span class="text-lg"> </span>'),Is=u('<button id="moveinstore"><span> </span> <!></button>'),Ts=u('<div class="grid md:grid-cols-[2fr,3fr] gap-4"><section class="rounded-2xl bg-white shadow-sm border p-4 space-y-3"><div class="flex gap-1 border-b pb-2"></div> <div class="space-y-3"></div> <div class="pt-3 border-t space-y-2"><input class="w-full rounded-lg border border-slate-200 px-3 py-1.5 text-xs placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="Item name"> <div class="grid gap-2"></div> <button id="addtobag" class="w-full rounded-lg bg-blue-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-blue-700 transition">Add to bags</button></div></section> <section class="rounded-2xl bg-white shadow-sm border p-4 space-y-3"><h3 class="text-sm font-semibold text-slate-900">Store layout</h3> <div></div></section></div> <footer class="sticky bottom-0 mt-4 rounded-2xl border border-slate-200 bg-white/95 backdrop-blur shadow-lg"><div class="flex items-center justify-between px-4 py-3"><div class="text-xs text-slate-600"><p>Items: <!></p></div> <button id="checkout" class="rounded-full bg-green-600 px-6 py-2 text-sm font-semibold text-white shadow-md hover:bg-green-700 transition">Checkout and Exit</button></div></footer>',1),Cs=u('<div class="rounded-2xl bg-blue-50 border border-blue-200 p-6 text-center space-y-2"><div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-2"><svg class="w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg></div> <h3 class="text-sm font-semibold text-blue-900"> </h3> <p class="text-xs text-blue-700"> </p></div>'),js=u('<div class="rounded-2xl bg-green-50 border border-green-200 p-6 text-center space-y-4"><div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100"><svg class="w-8 h-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <div><p class="text-lg font-semibold text-green-900">Order Complete!</p> <p class="text-sm text-green-700">All items collected correctly</p> <p class="text-xs text-slate-500 mt-2"> </p></div> <button class="rounded-full bg-green-600 px-6 py-2 text-sm font-semibold text-white shadow-md hover:bg-green-700 transition" id="ordersuccess">Next Round â†’</button></div>'),Ss=u('<div class="rounded-2xl bg-red-50 border border-red-200 p-6 text-center space-y-4"><div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100"><svg class="w-8 h-8 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div> <div><p class="text-lg font-semibold text-red-900">Incorrect Items</p> <p class="text-sm text-red-700">Please check your bags and try again</p></div> <button class="rounded-full bg-red-600 px-6 py-2 text-sm font-semibold text-white shadow-md hover:bg-red-700 transition" id="orderretry">Try Again</button></div>'),Ls=u('<main class="mx-auto max-w-5xl px-4 py-6 space-y-5"><section class="rounded-2xl bg-white shadow-sm border p-4 space-y-3"><div class="flex items-start justify-between"><div><h2 class="text-base font-semibold text-slate-900"> </h2> <p class="text-xs text-slate-500"> </p></div> <div class="text-right text-sm"><p class="font-semibold text-slate-900"> </p> <!> <p class="text-xs text-slate-500"> </p></div></div> <div class="flex flex-wrap gap-2 text-[10px]"><!> <!></div> <div class="flex flex-wrap gap-2"></div></section> <!></main>');function Es(Fe,je){yt(je,!1);const[g,Ye]=kt(),T=()=>w(De,"$orders",g),X=()=>w(Pt,"$elapsed",g),_=()=>w(Ae,"$game",g),ye=()=>w(jt,"$earned",g),xe=()=>w(Bt,"$uniqueSets",g),ge=()=>w(Gt,"$finishedOrders",g),Se=()=>w(_t,"$currentRound",g),le=()=>w(qt,"$roundStartTime",g),j=c(),m=c(),P=c(),re=c();let x=c(vt(T()[0].store)),C=c(0),y=c([0,0]),h=c([{},{},{}]),H=c(0),fe=c(["","",""]),ae=c(""),$e=c(0),Le=!1,Ee=c(X()),qe,O,a=c(),v=c(0);function S(){let o=Math.floor(e(m)/e(x).tipinterval),i=o<e(x).tip.length?1+e(x).tip[o]/100:e(x).tip[e(x).tip.length-1]/100;n(v,Math.round(i*100-100)),n(a,Math.round(O*i*100)/100)}let oe={1:"grid-cols-1",2:"grid-cols-2",3:"grid-cols-3",4:"grid-cols-4",5:"grid-cols-5",6:"grid-cols-6",7:"grid-cols-7",8:"grid-cols-8",9:"grid-cols-9"}[Kt];Ot(()=>{O=Ue(De).reduce((i,b)=>i+b.earnings,0),n(a,O),n(x,vt(T()[0].store)),n(y,e(x).Entrance),_().tip&&(qe=setInterval(S,1e3))}),Et(()=>{_().tip&&clearInterval(qe)});function R(o,i,b){o!=""&&(n($e,Math.abs(i-e(y)[0])+Math.abs(b-e(y)[1])),ct(y,e(y)[0]=i),ct(y,e(y)[1]=b),n(C,2),setTimeout(()=>{n(C,1)},e($e)*e(x).cellDistance))}function K(){Ue(De);let o=e(x).locations[e(y)[0]][e(y)[1]].toLowerCase();if(o==""||o=="entrance")return;let i={buttonID:"addtobag",buttonContent:"Add to bag",itemInput:e(ae),selectedBag:e(H)+1,bags:e(h).map(f=>({...f}))};if(e(ae).toLowerCase()!=o.toLowerCase()){alert("Incorrect! You must type the name of the item"),i.mistake="itemtypo",n(ae,""),n(fe,["","",""]),et(i);return}let b=[];for(let f=0;f<e(j);f++){let q=e(fe)[f].trim();if(q==="")b.push(0);else{let p=parseInt(q);if(isNaN(p)){alert("Error: Quantity inputs must be numbers"),i.mistake="numberempty",n(ae,""),n(fe,["","",""]),et(i);return}b.push(p)}}for(let f=0;f<e(j);f++)b[f]!==0&&(Object.keys(e(h)[f]).includes(o)?ct(h,e(h)[f][o]+=b[f]):ct(h,e(h)[f][o]=b[f]),e(h)[f][o]<=0&&delete e(h)[f][o]);n(ae,""),n(fe,["","",""]),et(i),n(h,e(h))}function Q(){const o=Ue(De);n(Ee,X()),n(x,vt(o[0].store)),n(C,1)}function U(){n(C,0),Ge(Ae,W(_).inSelect=!0,W(_)),Ge(Ae,W(_).inStore=!1,W(_))}function L(){const o=Ue(De),i=o.length;function b(p){if(p.length<=1)return[p];const z=[];for(let V=0;V<p.length;V++){const Z=[...p.slice(0,V),...p.slice(V+1)],te=b(Z);for(const J of te)z.push([p[V],...J])}return z}const f=Array.from({length:i},(p,z)=>z),q=b(f);Le=!1;for(const p of q){let z=!0;for(let V=0;V<i;V++){const Z=p[V],te=o[Z],J=e(h)[V];if(Object.keys(J).length!==Object.keys(te.items).length){z=!1;break}for(const pe of Object.keys(J))if(te.items[pe]!==J[pe]){z=!1;break}if(!z)break}if(z){Le=!0;break}}if(n(h,[{},{},{}]),Le){D(!0),nt(jt,ye()+e(a)),nt(Bt,xe()+1),o.forEach(p=>{Jt(p.id),ge().push(p)});for(let p=0;p<i;p++)T().shift();n(C,3)}else D(!1),n(C,4)}function D(o){const i=Lt(Se()),b=X()-le(),f=T().map(p=>p.id),q=i.orders.filter(p=>p.recommended).map(p=>p.id);et({type:"round_summary",round_index:Se(),phase:i.phase,scenario_id:i.scenario_id,available_orders:i.orders.map(p=>p.id),recommended_orders:q,chosen_orders:f,bundle_size:f.length,round_duration_s:b,round_earnings:o?e(a):0,success:o,gametime_elapsed_s:X()}),o&&_t.update(p=>p+1)}ie(()=>T(),()=>{n(j,T().length)}),ie(()=>(X(),e(Ee)),()=>{n(m,X()-e(Ee))}),ie(()=>e(h),()=>{n(P,e(h).map(o=>Object.values(o).reduce((i,b)=>i+b,0)))}),ie(()=>(e(x),e(y)),()=>{var o,i;n(re,((i=(o=e(x).locations)==null?void 0:o[e(y)[0]])==null?void 0:i[e(y)[1]])||"Entrance")}),$t(),ht();var N=Ls(),G=s(N),F=s(G),ee=s(F),k=s(ee),M=s(k,!0);t(k);var E=r(k,2),me=s(E);t(E),t(ee);var de=r(ee,2),be=s(de),ce=s(be);t(be);var Y=r(be,2);{var we=o=>{var i=us(),b=s(i);t(i),$(()=>d(b,`+${e(v)??""}% tip`)),l(o,i)};I(Y,o=>{_().tip&&e(v)>0&&o(we)})}var Me=r(Y,2),ve=s(Me);t(Me),t(de),t(F);var ue=r(F,2),Be=s(ue);{var It=o=>{var i=ps();l(o,i)},ke=(o,i)=>{{var b=f=>{var q=xs();l(f,q)};I(o,f=>{e(C)===2&&f(b)},i)}};I(Be,o=>{e(C)===1?o(It):o(ke,!1)})}var ze=r(Be,2);{var ot=o=>{var i=fs(),b=s(i);t(i),$(()=>d(b,`Time in store: ${e(m)??""}s`)),l(o,i)};I(ze,o=>{(e(C)==1||e(C)==2)&&o(ot)})}t(ue);var pt=r(ue,2);_e(pt,5,T,Ce,(o,i,b)=>{var f=gs(),q=s(f),p=s(q);t(q);var z=r(q,2),V=s(z);t(z);var Z=r(z,2);_e(Z,5,()=>Object.keys(e(i).items),Ce,(te,J)=>{var pe=ms(),se=s(pe);t(pe),$(()=>d(se,`${e(i).items[e(J)]??""}x ${e(J)??""}`)),l(te,pe)}),t(Z),t(f),$(()=>{d(p,`Order ${b+1} for ${e(i).name??""}`),d(V,`Pay: $${e(i).earnings??""}`)}),l(o,f)}),t(pt),t(G);var Ht=r(G,2);{var Ut=o=>{var i=bs(),b=s(i),f=s(b);t(b),t(i),$(()=>d(f,`Start Picking (${e(j)??""} ${e(j)===1?"Order":"Orders"})`)),he("click",b,Q),l(o,i)},Ft=(o,i)=>{{var b=q=>{var p=Ts(),z=Ne(p),V=s(z),Z=s(V);_e(Z,5,()=>Array(e(j)),Ce,(Ie,Je,B)=>{var A=hs(),Re=s(A);Re.nodeValue=`Bag ${B+1} `;var it=r(Re);{var Xe=Pe=>{var Te=_s(),Ve=s(Te,!0);t(Te),$(()=>d(Ve,e(P)[B])),l(Pe,Te)};I(it,Pe=>{e(P)[B]>0&&Pe(Xe)})}t(A),$(()=>rt(A,1,`flex-1 rounded-t-lg px-3 py-1.5 text-xs font-medium transition ${e(H)===B?"bg-green-100 text-green-700":"bg-slate-50 text-slate-600 hover:bg-slate-100"}`)),he("click",A,()=>n(H,B)),l(Ie,A)}),t(Z);var te=r(Z,2);_e(te,5,()=>Array(e(j)),Ce,(Ie,Je,B)=>{var A=ws(),Re=s(A),it=s(Re);t(Re);var Xe=r(Re,2),Pe=s(Xe);_e(Pe,1,()=>Object.keys(e(h)[B]),Ce,(We,Ke)=>{var lt=ys(),Qe=s(lt),dt=s(Qe,!0);t(Qe);var mt=r(Qe,2),Wt=s(mt,!0);t(mt),t(lt),$(()=>{d(dt,e(Ke)),d(Wt,e(h)[B][e(Ke)])}),l(We,lt)});var Te=r(Pe,2);{var Ve=We=>{var Ke=$s();l(We,Ke)};I(Te,We=>{Object.keys(e(h)[B]).length===0&&We(Ve)})}t(Xe),t(A),$(()=>d(it,`Bag ${B+1} - ${T()[B].name??""}`)),l(Ie,A)}),t(te);var J=r(te,2),pe=s(J);gt(pe);var se=r(pe,2);_e(se,5,()=>Array(e(j)),Ce,(Ie,Je,B)=>{var A=ks();gt(A),Nt(A,"placeholder",`Bag ${B+1}`),bt(A,()=>e(fe)[B],Re=>ct(fe,e(fe)[B]=Re)),l(Ie,A)}),t(se);var Oe=r(se,2);t(J),t(V);var He=r(V,2),Ze=r(s(He),2);rt(Ze,1,`grid gap-2 ${oe}`),_e(Ze,5,()=>e(x).locations,Ce,(Ie,Je,B)=>{var A=at(),Re=Ne(A);_e(Re,1,()=>e(Je),Ce,(it,Xe,Pe)=>{var Te=Is(),Ve=s(Te),We=s(Ve,!0);t(Ve);var Ke=r(Ve,2);{var lt=Qe=>{var dt=Os(),mt=s(dt,!0);t(dt),$(()=>d(mt,Xt[e(Xe)])),l(Qe,dt)};I(Ke,Qe=>{Xt[e(Xe)]&&Qe(lt)})}t(Te),$(()=>{rt(Te,1,`flex min-h-[60px] flex-col items-center justify-center rounded-xl text-xs font-medium transition ${B===e(y)[0]&&Pe===e(y)[1]?"bg-green-100 border-2 border-green-500 text-green-900":"border border-slate-200 bg-slate-50 text-slate-800 hover:bg-slate-100"}`),d(We,e(Xe))}),he("click",Te,()=>R(e(Xe),B,Pe)),l(it,Te)}),l(Ie,A)}),t(Ze),t(He),t(z);var xt=r(z,2),ft=s(xt),Tt=s(ft),Mt=s(Tt),Yt=r(s(Mt));_e(Yt,1,()=>e(P),Ce,(Ie,Je,B)=>{St();var A=Qt();$(()=>d(A,`Bag ${B+1} (${e(Je)??""})${B<e(j)-1?" Â· ":""}`)),l(Ie,A)}),t(Mt),t(Tt);var Vt=r(Tt,2);t(ft),t(xt),$(()=>cs(se,`grid-template-columns: repeat(${e(j)??""}, 1fr);`)),bt(pe,()=>e(ae),Ie=>n(ae,Ie)),he("click",Oe,K),he("click",Vt,L),l(q,p)},f=(q,p)=>{{var z=Z=>{var te=Cs(),J=r(s(te),2),pe=s(J);t(J);var se=r(J,2),Oe=s(se);t(se),t(te),$(()=>{d(pe,`Walking to ${e(x).locations[e(y)[0]][e(y)[1]]??""}`),d(Oe,`Travel time: ${e($e)*e(x).cellDistance/1e3}s`)}),l(Z,te)},V=(Z,te)=>{{var J=se=>{var Oe=js(),He=r(s(Oe),2),Ze=r(s(He),4),xt=s(Ze);t(Ze),t(He);var ft=r(He,2);t(Oe),$(()=>d(xt,`Round ${Se()-1} finished`)),he("click",ft,U),l(se,Oe)},pe=se=>{var Oe=Ss(),He=r(s(Oe),4);t(Oe),he("click",He,Q),l(se,Oe)};I(Z,se=>{e(C)==3?se(J):se(pe,!1)},te)}};I(q,Z=>{e(C)==2?Z(z):Z(V,!1)},p)}};I(o,q=>{e(C)==1?q(b):q(f,!1)},i)}};I(Ht,o=>{e(C)==0?o(Ut):o(Ft,!1)})}t(N),$(()=>{d(M,T()[0].store),d(me,`Current location: ${e(re)??""}`),d(ce,`Total earnings: $${e(a)??""}`),d(ve,`Orders: ${e(j)??""}`)}),l(Fe,N),wt(),Ye()}var Ms=u('<div class="rounded-2xl bg-red-50 border border-red-200 shadow-sm p-4"><p class="text-sm font-semibold text-red-800 text-center"> </p> <p class="text-xs text-red-600 text-center mt-1">Waiting for new order...</p></div>'),Bs=u('<div class="absolute top-3 right-3 rounded-full bg-emerald-50 px-2.5 py-1 text-[10px] font-semibold text-emerald-700 flex items-center gap-1 shadow-sm"><span class="inline-block h-2 w-2 rounded-full bg-emerald-500"></span> Recommended</div>'),Rs=u('<span class="rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-medium text-amber-800">High demand</span>'),Ds=u('<p class="truncate"> </p>'),As=u('<div><!> <div class="flex flex-col gap-3 p-4"><div class="flex items-start justify-between gap-3"><div><p class="text-sm font-semibold text-slate-900"> </p> <p class="text-xs text-slate-500"> </p></div> <div><span class="rounded-full bg-blue-100 px-2 py-0.5 text-[10px] font-medium text-blue-800">Batch</span> <!></div></div> <div class="flex items-baseline gap-2"><p class="text-xs text-slate-500">Pay</p> <p class="text-lg font-semibold text-slate-900"> </p></div> <div class="flex justify-between gap-4"><div class="space-y-0.5 text-xs text-slate-600 flex-1"><p> </p> <p> </p> <p> </p></div> <div class="text-right text-xs text-slate-600 max-w-[120px]"></div></div> <div class="mt-2 flex justify-end"><button type="button"> </button></div></div></div>');function Xs(Fe,je){yt(je,!1);const[g,Ye]=kt(),T=()=>w(_t,"$currentRound",g),X=()=>w(Ae,"$game",g),_=()=>w(De,"$orders",g),ye=()=>w(st,"$orderList",g),xe=()=>w(ut,"$currLocation",g),ge=()=>w(tt,"$gameText",g),Se=c(),le=c(),j=c();let m=Ct(je,"orderData",12),P=Ct(je,"index",8),re=Ct(je,"updateEarnings",8),x=c(!1),C=0,y,h=c(!1),H=vt(m().store);function fe(){if(C+=1,X().waiting){let a=Math.floor(C/H.waitinginterval),v=a<H.waiting.length?1+H.waiting[a]/100:H.waiting[H.waiting.length-1]/100;m(m().earnings=Math.round(m().startingearnings*v*100)/100,!0),re()(P(),m().earnings)}if(X().refresh&&m().demand>Math.random()*100){if(e(x)){for(let a=0;a<_().length;a++)if(_()[a].id==m().id){_().splice(a,1);break}n(x,!1)}n(h,!0),setTimeout(ae,H.refresh*1e3)}}function ae(){clearInterval(y),nt(st,[...ye(),...zt(1)]),ye().splice(P(),1)}Ot(()=>{(X().waiting||X().refresh)&&(C=0,H=vt(m().store),y=setInterval(fe,1e3))}),Et(()=>{(X().waiting||X().refresh)&&(clearInterval(y),C=0)});function $e(){if(e(x)){for(let a=0;a<_().length;a++)if(_()[a].id==m().id){_().splice(a,1);break}n(x,!1)}else{if(_().length>=e(j))return;_().push(m()),n(x,!0)}_().length>0?_()[0].city==xe()?Ge(tt,W(ge).selector=`Go to store (${_().length} ${_().length===1?"order":"orders"})`,W(ge)):Ge(tt,W(ge).selector=`Travel to ${_()[0].city} (${_().length} ${_().length===1?"order":"orders"})`,W(ge)):Ge(tt,W(ge).selector="None selected",W(ge)),console.log(_())}ie(()=>Zt(m()),()=>{n(Se,Object.values(m().items||{}).reduce((a,v)=>a+v,0))}),ie(()=>T(),()=>{n(le,Lt(T()))}),ie(()=>e(le),()=>{n(j,e(le).max_bundle??3)}),$t(),ht();var Le=at(),Ee=Ne(Le);{var qe=a=>{var v=Ms(),S=s(v),ne=s(S);t(S),St(2),t(v),$(()=>d(ne,`ðŸš« ${m().store??""} batch taken!`)),l(a,v)},O=a=>{var v=As(),S=s(v);{var ne=ke=>{var ze=Bs();l(ke,ze)};I(S,ke=>{m().recommended&&ke(ne)})}var oe=r(S,2),R=s(oe),K=s(R),Q=s(K),U=s(Q,!0);t(Q);var L=r(Q,2),D=s(L,!0);t(L),t(K);var N=r(K,2),G=r(s(N),2);{var F=ke=>{var ze=Rs();l(ke,ze)};I(G,ke=>{m().demand>0&&ke(F)})}t(N),t(R);var ee=r(R,2),k=r(s(ee),2),M=s(k);t(k),t(ee);var E=r(ee,2),me=s(E),de=s(me),be=s(de);t(de);var ce=r(de,2),Y=s(ce);t(ce);var we=r(ce,2),Me=s(we);t(we),t(me);var ve=r(me,2);_e(ve,5,()=>Object.keys(m().items),Ce,(ke,ze)=>{var ot=Ds(),pt=s(ot);t(ot),$(()=>d(pt,`${m().items[e(ze)]??""}x ${e(ze)??""}`)),l(ke,ot)}),t(ve),t(E);var ue=r(E,2),Be=s(ue),It=s(Be,!0);t(Be),t(ue),t(oe),t(v),$(()=>{Nt(v,"id",P()+"Selected"+e(x)),rt(v,1,`relative rounded-2xl bg-white shadow-sm border transition cursor-pointer select-none ${e(x)?"ring-2 ring-green-500 shadow-md":"hover:shadow-md"}`),d(U,m().store),d(D,m().city),rt(N,1,`flex flex-wrap gap-1 justify-end ${m().recommended?"mr-24":""}`),d(M,`$${m().earnings??""}`),d(be,`${e(Se)??""} total items`),d(Y,`Customer: ${m().name??""}`),d(Me,`Zone: ${xe()??""}`),rt(Be,1,`rounded-full px-4 py-1.5 text-xs font-semibold transition ${e(x)?"bg-green-600 text-white":"bg-slate-100 text-slate-800 hover:bg-slate-200"}`),d(It,e(x)?"Selected âœ“":"Select order")}),he("click",v,$e),l(a,v)};I(Ee,a=>{e(h)?a(qe):a(O,!1)})}l(Fe,Le),wt(),Ye()}var Ps=u('<div class="rounded-2xl bg-white shadow-sm border p-6 text-center space-y-2"><div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-2"><svg class="w-6 h-6 text-blue-600 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div> <p class="text-lg font-semibold text-slate-900"> </p> <p class="text-sm text-slate-500"> </p></div>'),Ns=u('<div class="rounded-xl bg-blue-50 border border-blue-200 p-4 mb-4"><p class="text-sm font-medium text-blue-900 text-center"> </p></div>'),Gs=u('<button class="rounded-full bg-slate-100 px-4 py-2 text-xs font-medium text-slate-700 hover:bg-slate-200 transition" id="travel"> </button>'),qs=u('<div class="mt-6 flex flex-wrap items-center justify-center gap-3"><button id="startorder" class="rounded-full bg-green-600 px-6 py-2.5 text-sm font-semibold text-white shadow-md hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed"> </button> <!></div>'),zs=u('<!> <div class="flex items-baseline justify-between"><h2 class="text-lg font-semibold text-slate-900">Available batches</h2> <p class="text-xs text-slate-500"> </p></div> <div class="mt-3 grid gap-4 md:grid-cols-2"></div> <!>',1),Hs=u('<section class="mx-auto max-w-5xl px-4 py-6 space-y-4"><!></section>');function Us(Fe,je){yt(je,!1);const[g,Ye]=kt(),T=()=>w(_t,"$currentRound",g),X=()=>w(ut,"$currLocation",g),_=()=>w(De,"$orders",g),ye=()=>w(tt,"$gameText",g),xe=()=>w(Ae,"$game",g),ge=()=>w(Pt,"$elapsed",g),Se=()=>w(st,"$orderList",g),le=c(),j=c(),m=c(),P=c();let re=c(!1),x=c(0),C=c(""),y=c(!1),h=c(Rt),H;function fe(){const a=Ue(De),v=Ue(Ae),S=Ue(ut);if(a.length<1){alert(`Please select 1 to ${e(j)} orders!`);return}if(a.length>e(j)){alert(`You can only select up to ${e(j)} orders this round!`);return}if(a.length>1){const ne=a[0].store,oe=a[0].city;for(let R of a)if(R.store!==ne||R.city!==oe){alert("Cannot bundle orders from different stores/cities!");return}v.bundled=!0}else v.bundled=!1;a[0].city!=S?ae(a[0].city,!0):$e()}function ae(a,v){let S=e(P).destinations.indexOf(a);S!=-1&&(n(x,e(P).distances[S]),n(re,!0),n(C,a),setTimeout(()=>{n(re,!1),ut.set(a),v?$e():(nt(De,[]),n(P,Dt(a)),Ge(tt,W(ye).selector="None selected",W(ye)))},e(x)*1e3))}function $e(){const a=Ue(De);es(a,e(m)),Ge(Ae,W(xe).inStore=!0,W(xe)),Ge(Ae,W(xe).inSelect=!1,W(xe))}function Le(a,v){console.log("updated: "+a+" "+v),st.update(S=>(S[a].earnings=v,S))}Ot(()=>{qt.set(ge()),st.set(e(m)),n(y,!0),n(h,Rt),H=setInterval(()=>{n(h,e(h)-1),e(h)<=0&&(clearInterval(H),n(y,!1))},1e3)}),Et(()=>{H&&clearInterval(H)}),ie(()=>T(),()=>{n(le,Lt(T()))}),ie(()=>e(le),()=>{n(j,e(le).max_bundle??3)}),ie(()=>e(le),()=>{n(m,e(le).orders)}),ie(()=>X(),()=>{n(P,Dt(X()))}),$t(),ht();var Ee=at(),qe=Ne(Ee);{var O=a=>{var v=Hs(),S=s(v);{var ne=R=>{var K=Ps(),Q=r(s(K),2),U=s(Q);t(Q);var L=r(Q,2),D=s(L);t(L),t(K),$(()=>{d(U,`Traveling to ${e(C)??""}`),d(D,`Est. travel time: ${e(x)??""}s`)}),l(R,K)},oe=R=>{var K=zs(),Q=Ne(K);{var U=k=>{var M=Ns(),E=s(M),me=s(E);t(E),t(M),$(()=>d(me,`ðŸ“‹ Review available batches (${e(h)??""}s remaining)`)),l(k,M)};I(Q,k=>{e(y)&&k(U)})}var L=r(Q,2),D=r(s(L),2),N=s(D);t(D),t(L);var G=r(L,2);_e(G,7,Se,k=>k.id,(k,M,E)=>{Xs(k,{get orderData(){return e(M)},get index(){return e(E)},updateEarnings:Le})}),t(G);var F=r(G,2);{var ee=k=>{var M=qs(),E=s(M),me=s(E,!0);t(E);var de=r(E,2);{var be=ce=>{var Y=at(),we=Ne(Y);_e(we,1,()=>e(P).destinations,Ce,(Me,ve)=>{var ue=Gs(),Be=s(ue);t(ue),$(()=>d(Be,`Travel to ${e(ve)??""}`)),he("click",ue,()=>ae(e(ve),!1)),l(Me,ue)}),l(ce,Y)};I(de,ce=>{e(P)&&e(P).destinations&&ce(be)})}t(M),$(()=>{E.disabled=_().length===0,d(me,ye().selector)}),he("click",E,fe),l(k,M)};I(F,k=>{e(y)||k(ee)})}$(()=>d(N,`Round ${T()??""} â€¢ Select up to ${e(j)??""} ${e(j)===1?"order":"orders"}`)),l(R,K)};I(S,R=>{e(re)?R(ne):R(oe,!1)})}t(v),l(a,v)};I(qe,a=>{xe().inSelect&&a(O)})}l(Fe,Ee),wt(),Ye()}var Fs=u('<div class="min-h-screen bg-slate-50 flex items-center justify-center px-4"><div class="text-red-600 font-bold bg-red-100 p-4 rounded-xl max-w-2xl"> </div></div>'),Ys=u('<div class="space-y-4"><div class="space-y-1"><label class="text-sm font-medium text-slate-700">User ID</label> <input class="w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition" type="text" placeholder="Enter user ID"></div> <div class="space-y-1"><label class="text-sm font-medium text-slate-700">Token (include dashes)</label> <input class="w-full rounded-lg border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition" type="password" placeholder="XXXX-XXXX-XXXX"></div> <button id="start" class="mt-4 w-full rounded-xl bg-green-600 py-2.5 text-sm font-semibold text-white shadow-md hover:bg-green-700 transition">Enter Simulation</button> <button type="button" class="w-full text-center text-xs text-slate-500 hover:text-slate-700 mt-2 transition">Return to overview</button></div>'),Vs=u('<main class="min-h-screen bg-slate-950 flex items-center justify-center px-4"><div class="bg-white rounded-3xl shadow-2xl p-8 md:p-10 w-full max-w-md"><h1 class="text-center text-2xl font-semibold text-slate-900 mb-6">User Access</h1> <!></div></main>'),Ws=u('<div class="bg-yellow-100 p-4 rounded-xl border border-yellow-400"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Please copy the following two codes back into the Qualtrics survey:</h3> <p class="text-gray-800"><span class="font-semibold">Code #1:</span><span class="text-blue-600 font-mono"> </span></p> <p class="text-gray-800"><span class="font-semibold">Code #2:</span><span class="text-blue-600 font-mono"> </span></p></div> <h5 class="text-sm text-gray-600">You may close this page once you have successfully continued to the next step in the survey.</h5>',1),Qs=u('<div class="min-h-screen bg-slate-50 flex items-center justify-center px-4"><div class="max-w-xl w-full p-6 bg-white rounded-2xl shadow-md text-center space-y-6"><h3 class="text-2xl font-bold text-red-600">Game Over!</h3> <div><h4 class="text-xl font-semibold text-gray-800">Your Stats:</h4> <ul class="list-disc list-inside text-left text-gray-700 mt-2 space-y-1"><li><span class="font-medium">Earnings:</span> </li> <li><span class="font-medium">Finished Orders:</span> </li></ul></div> <!></div></div>'),Zs=u('<div class="min-h-screen bg-slate-50"><header class="sticky top-0 z-10 bg-white/90 backdrop-blur border-b border-slate-100"><div class="mx-auto flex max-w-5xl items-center justify-between px-4 py-3 text-xs sm:text-sm text-slate-700 flex-wrap gap-2"><span class="font-semibold text-red-600">Please do not refresh or close the page!</span> <div class="flex flex-wrap gap-4"><span><span class="font-semibold text-slate-900">Time left:</span> </span> <span><span class="font-semibold text-slate-900">Earned:</span> </span> <span><span class="font-semibold text-slate-900">Location:</span> </span></div></div></header> <!></div>');function lr(Fe,je){yt(je,!1);const[g,Ye]=kt(),T=()=>w(Ae,"$game",g),X=()=>w(ts,"$remainingTime",g),_=()=>w(vs,"$globalError",g),ye=()=>w(ss,"$GameOver",g),xe=()=>w(jt,"$earned",g),ge=()=>w(Gt,"$finishedOrders",g),Se=()=>w(ut,"$currLocation",g),le=c(),j=c(),m=c(),P=c();let re=c(""),x=c(""),C=c(!1),y=c(""),h=c("");function H(O){const a=Math.max(0,Math.floor(O)),v=Math.floor(a/60),S=a%60;return`${v}:${S.toString().padStart(2,"0")}`}async function fe(){if(await rs(e(re),e(x))===1){const a=await as(e(re));a!=-1&&(ns(),os(),Ge(Ae,W(T).inSelect=!0,W(T)),nt(is,e(re)),n(C,!0),nt(st,zt(ds)),n(y,ls(e(re))),n(h,a))}else alert("id and token do not match")}function ae(O){{if(O.target.id==="start"||O.target.id==="addtobag")return;if(O.target.tagName=="BUTTON"){let a={buttonID:O.target.id,buttonContent:O.target.textContent.trim()};et(a)}else if(O.target.classList.contains("order-content")){let a={buttonID:O.target.id,buttonContent:O.target.textContent.trim()};et(a)}}}Ot(()=>(window.addEventListener("click",ae),()=>{console.log("listener removed"),window.removeEventListener("click",ae)})),ie(()=>T(),()=>{n(le,T().inSelect)}),ie(()=>T(),()=>{n(j,T().inStore)}),ie(()=>T(),()=>{n(m,T().bundled)}),ie(()=>(X(),At),()=>{n(P,H(X()??At))}),$t(),ht();var $e=at(),Le=Ne($e);{var Ee=O=>{var a=Fs(),v=s(a),S=s(v);t(v),t(a),$(()=>d(S,`âš ï¸ Error: ${_()??""}`)),l(O,a)},qe=(O,a)=>{{var v=ne=>{var oe=Vs(),R=s(oe),K=r(s(R),2);{var Q=U=>{var L=Ys(),D=s(L),N=r(s(D),2);gt(N),t(D);var G=r(D,2),F=r(s(G),2);gt(F),t(G);var ee=r(G,2),k=r(ee,2);t(L),bt(N,()=>e(re),M=>n(re,M)),bt(F,()=>e(x),M=>n(x,M)),he("click",ee,fe),he("click",k,()=>window.location.href="/"),l(U,L)};I(K,U=>{U(Q)})}t(R),t(oe),l(ne,oe)},S=ne=>{var oe=at(),R=Ne(oe);{var K=U=>{var L=Qs(),D=s(L),N=r(s(D),2),G=r(s(N),2),F=s(G),ee=r(s(F));t(F);var k=r(F,2),M=r(s(k));t(k),t(G),t(N);var E=r(N,2);{var me=de=>{var be=Ws(),ce=Ne(be),Y=r(s(ce),2),we=r(s(Y)),Me=s(we,!0);t(we),t(Y);var ve=r(Y,2),ue=r(s(ve)),Be=s(ue,!0);t(ue),t(ve),t(ce),St(2),$(()=>{d(Me,e(y)),d(Be,e(h))}),l(de,be)};I(E,de=>{de(me)})}t(D),t(L),$(()=>{d(ee,` $${xe()??""}`),d(M,` ${ge().length??""}`)}),l(U,L)},Q=U=>{var L=Zs(),D=s(L),N=s(D),G=r(s(N),2),F=s(G),ee=r(s(F));t(F);var k=r(F,2),M=r(s(k));t(k);var E=r(k,2),me=r(s(E));t(E),t(G),t(N),t(D);var de=r(D,2);{var be=Y=>{Us(Y,{})},ce=(Y,we)=>{{var Me=ve=>{Es(ve,{})};I(Y,ve=>{e(j)&&ve(Me)},we)}};I(de,Y=>{e(le)?Y(be):Y(ce,!1)})}t(L),$(()=>{d(ee,` ${e(P)??""}`),d(M,` $${xe()??""}`),d(me,` ${Se()??""}`)}),l(U,L)};I(R,U=>{ye()?U(K):U(Q,!1)})}l(ne,oe)};I(O,ne=>{!e(C)&&!ye()?ne(v):ne(S,!1)},a)}};I(Le,O=>{_()?O(Ee):O(qe,!1)})}l(Fe,$e),wt(),Ye()}export{lr as component};
